{% extends 'contents.html' %}
{% block body %}
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>

<table id="schoolsTable">
    <tr>
        <th id="hideschools" colspan="3" onclick="schoolToggle()">Filter by School</th>
    </tr>
    <tr id="toggleCheck" class="schoolToggle" style="display: none;">
        <th><a href="/spells/{{ source }}/1">Abjuration</a></th>
        <th><a href="/spells/{{ source }}/2">Conjuration</a></th>
        <th><a href="/spells/{{ source }}/3">Divination</a></th>
    </tr>
    <tr class="schoolToggle" style="display: none;">
        <th><a href="/spells/{{ source }}/4">Enchantment</a></th>
        <th><a href="/spells/{{ source }}/5">Evocation</a></th>
        <th><a href="/spells/{{ source }}/6">Illusion</a></th>
    </tr>
    <tr class="schoolToggle" style="display: none;">
        <th><a href="/spells/{{ source }}/7">Necromancy</a></th>
        <th><a href="/spells/{{ source }}/8">Transmutation</a></th>
        <th><a href="/spells/{{ source }}/9">Other</a></th>
    </tr>
</table>

<table class="sortable" id="spellsTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>School</th>
            <th>Level</th>
            <th>View</th>
        </tr>
    </thead>
    <tbody>
        {% for spell in spells %}
            <tr class="item">
                <th>{{ spell.SpellName }}</th>
                <th>{{ spell.school.SchoolName }}</th>
                <th>{{ spell.SpellLevel }}</th>
                <td>
                    <form action="/viewspell/{{ spell.SpellID }}" method="GET">                    
                        <input type="submit" value="View">
                    </form>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<script type="text/javascript">
    function schoolToggle() {
        var elems = document.getElementsByClassName('schoolToggle');
        if (document.getElementById('toggleCheck').style.display === 'none'){
            for (var i=0;i<elems.length;i+=1){
                elems[i].style.display = 'table-row';
            }
        } else {
            for (var i=0;i<elems.length;i+=1){
                elems[i].style.display = 'none';
            }
        }
    }
</script>

{% endblock %}